# Проект AI Arena

## Цели и задачи проекта
Цель проекта AI Arena – создать сетевую игру, где игроки могут создавать уникальных персонажей, описывать их текстово и с помощью нейросети видеть визуализацию этих персонажей, участвовать в поединках и соревноваться с другими игроками. Проект использует возможности мультимодальной модели Google Gemini для генерации изображений, описаний и анализа боев.

### Задачи проекта:
- Обеспечить платформу для создания и управления персонажами.
- Создать динамичную механику боя с использованием нейросетей.
- Внедрить автоматический, полуавтоматический и ручной режимы игры.
- Обеспечить удобный интерфейс для игроков, администраторов и зрителей.
- Реализовать систему коммуникации и модерации чата с автоматическим переводом сообщений.
- Использовать возможности мультимодальной модели Google Gemini для генерации изображений и описаний персонажей, анализа боев и создания видеоматериалов.

## Интерфейс

### Интерфейс игрока:
- **Главная страница игрока**:
  - Текстовое поле для ввода имени персонажа: Игрок вводит имя своего персонажа (в дальнейшем можно создавать несколько персонажей, их редактировать и выставлять против конкретного противника).
  - Текстовое поле для ввода характеристик: Игрок вводит характеристики персонажа (оружие, сила, броня и т.д.).
  - Голосовой ввод: Возможность диктовать характеристики персонажа с помощью Google Speech-to-Text.
  - Примерные подсказки: Минимальные подсказки для структуры описания персонажа.
  - Пример описания характеристик персонажа.

- **Выбор режима игры**:
  - Автоматический режим: Нейросеть полностью контролирует все действия.
  - Полуавтоматический режим: Игрок может вводить команды текстом или голосом, а нейросеть на их основе меняет тактику боя.
  - Ручной режим: Игрок сам описывает все действия своего персонажа.

- **Чат**:
  - Отправка сообщений: Возможность отправлять сообщения в общий чат.
  - Автоматический перевод: Сообщения переводятся на язык игрока с помощью Google Gemini, если включен такой режим.
  - Модерация: Сообщения автоматически модерируются для удаления оскорблений.

- **Отображение боя**:
  - Текстовое описание атак и защит: Нейросеть описывает каждую атаку и защиту.
  - Генерация ключевых моментов: Каждые шесть выпадов/комбинаций/финтов генерируется изображение ключевого момента, окно сдвигается по мере боя. Размер окна задается параметром в настройках.

### Интерфейс администратора:
- **Управление чатом**:
  - Модерация сообщений: Возможность модерировать и удалять сообщения.

- **Настройки нейросетей**:
  - Регулировка параметров: Настройка температуры, топ-p, топ-k и других параметров нейросетей.
  - Настройки оценки действий и защит: Настройка оценки специфических действий, типов атак и защит.
  - Оценка боев: Настройка метрик или критериев для оценки боев.

- **Управление пользователями**:
  - Просмотр и управление пользователями: Возможность просматривать и управлять профилями пользователей (предупреждать, блокировать и т.д.).

### Интерфейс зрителя:
- **Отображение персонажей**:
  - Информация о персонажах: Отображение имени, характеристик и изображения персонажей.
  - Описание боев в общем чате (режим комментатора): Текстовое описание каждого боя с ключевыми моментами и изображениями.

## Механика игры

### Создание персонажа:
- Игрок вводит имя и характеристики своего персонажа.
- Нейросеть генерирует изображение и характеристики персонажа на основе описания.

### Механика боя:
- **Назначение начальных баллов**:
  - Каждому персонажу присваивается определенное количество жизненных баллов на основе его характеристик.

- **Подсчет баллов во время боя**:
  - Нейросеть генерирует атаки и защиты, которые имеют определенную эффективность и силу.
  - Каждый эффективный удар отнимает определенное количество баллов у противника.

- **Определение победителя**:
  - Бой продолжается до тех пор, пока у одного из персонажей не закончатся жизненные баллы.
  - Персонаж, у которого жизненные баллы достигли нуля первым, проигрывает, а его соперник объявляется победителем.

- **Бонусы за успешные и интересные ходы**:
  - Нейросеть присваивает бонусные баллы за особенно удачные и интересные ходы.

### Режимы игры:
- **Автоматический режим**:
  - Нейросеть полностью контролирует все действия и решения персонажа во время боя.

- **Полуавтоматический режим**:
  - Игроки могут вводить команды текстом или голосом.
  - Команды могут включать любые действия, доступные персонажу, с учетом его характеристик.
  - Нейросеть комбинирует предложения игроков с собственной стратегией для создания оптимальных атак и защит.

- **Ручной режим**:
  - Игроки полностью описывают все действия своего персонажа.

## Использование возможностей модели Google Gemini в проекте AI Arena
- **Генерация изображений и описаний**:
  - Google Gemini используется для создания изображений персонажей на основе текстовых описаний игроков и их характеристик.

- **Анализ боев**:
  - Нейросеть анализирует бои, генерирует текстовые описания атак и защит, присваивает баллы и определяет победителя.

- **Создание видео после боя**:
  - Google Gemini генерирует сценарии и тексты для видео на основе изображений персонажей, их описания и изображений боев.
  - Создаются визуальные элементы и выполняется автоматический монтаж видео.
  - Сгенерированное видео публикуется на платформе для просмотра участниками и зрителями.

- **Перевод и модерация сообщений в чате**:
  - Все сообщения автоматически переводятся на английский язык и сохраняются в базе данных.
  - На основе локальных настроек языка игрока сообщения переводятся на его родной язык и отображаются в его окне чата, если задан такой параметр.
  - Сообщения автоматически модерируются для удаления оскорблений.

## Технические требования

### Веб-страница:
- Игра будет браузерной, открываться без проблем на телефоне и компьютере.
- Главная страница будет одностраничным приложением (SPA) с необходимой информацией.
- Отдельные одностраничные виды для каждого игрока и отдельные виды для зрителей.

### Аутентификация и база данных:
- Использование уникальных ID на основе куков для аутентификации игроков.
- Использование SQLite для хранения информации о игроках и их характеристиках.
- Создание отдельной таблицы для сохранения чата и поддержка его длительное время.

## Заключение
Проект AI Arena предоставляет уникальную платформу для создания и управления персонажами, участия в поединках и общения с другими игроками. Использование возможностей модели Google Gemini позволяет обеспечить высокое качество генерации изображений и описаний, анализ боев и создание видеоматериалов. Гибкость режимов игры и продуманная система интерфейсов делают игру доступной и интересной для всех участников.

______________________________________________________________________
*Топ-p (также известный как "nucleus sampling")
Представьте себе, что у нас есть коробка с шарами разного цвета, и каждый цвет представляет собой возможный вариант ответа модели. Топ-p помогает выбрать только самые вероятные варианты из этой коробки.
Как это работает:
1. Модель считает вероятность каждого возможного варианта ответа.
2. Затем она выбирает только те варианты, которые в сумме дают вероятность p (например, 0.9 или 90%).
3. Из оставшихся вариантов модель случайным образом выбирает один для ответа.
Таким образом, топ-p позволяет учитывать только самые вероятные ответы, но сохраняет элемент случайности, что делает ответы более разнообразными.

*Топ-k
Теперь представьте, что у нас есть коробка с шарами, но вместо вероятностей на каждом шаре написан его ранг (например, первое место, второе место и так далее).
Как это работает:
1. Модель выбирает k самых вероятных вариантов (например, k = 10).
2. Из этих k вариантов модель случайным образом выбирает один для ответа.
Топ-k ограничивает выбор модели до фиксированного числа самых вероятных вариантов, что делает ответы более предсказуемыми, но все еще разнообразными.
