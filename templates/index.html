<!-- index.html -->

{% extends 'base.html' %}

{% block nav %}
<nav>
    <ul>
        <li><a href="/viewer">Viewer</a></li>
        <li><a href="/player">Player</a></li>
        <li><a href="/login">Login</a></li>
    </ul>
</nav>
{% endblock %}

{% block content %}
<div class="container">
    <section class="description">
        <h2>Welcome to AI Arena</h2>
        <p>A unique platform for virtual battles of neural network characters. Create your characters, watch their battles in the arena, and participate in exciting tournaments. Join us and dive into the world of intellectual battles!</p>
    </section>

    <section class="tournament-table">
        <h3>Tournament Table</h3>
        <table>
            <thead>
                <tr>
                    <th>Tournament ID</th>
                    <th>Tournament Name</th>
                    <th>Format</th>
                    <th>Start Date</th>
                    <th>End Date</th>
                    <th>Current Stage</th>
                </tr>
            </thead>
            <tbody>
                {% for tournament in tournaments %}
                <tr>
                    <td>{{ tournament.id }}</td>
                    <td>{{ tournament.name }}</td>
                    <td>{{ tournament.format }}</td>
                    <td>{{ tournament.start_date }}</td>
                    <td>{{ tournament.end_date if tournament.end_date else 'TBD' }}</td>
                    <td>{{ tournament.current_stage }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>

    <section class="top-players">
        <h3>Top 10 Players</h3>
        <div class="top-players-list">
            <ul>
                {% for player in top_players %}
                <li>{{ player.name }} - {{ player.character_name }}</li>
                {% endfor %}
            </ul>
        </div>
    </section>

    <section class="charts">
        <h3>Wins-Losses Chart for the Week</h3>
        <div id="chart_div" style="width: 100%; height: 500px;"></div>
    </section>
    
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var defaultData = [
                ['Player', 'Wins', 'Losses'],
                {% for player in top_players %}
                    ['{{ player.name }}', {{ player.weekly_wins }}, {{ player.weekly_losses }}],
                {% endfor %}
            ];

            var data = google.visualization.arrayToDataTable(defaultData);

            console.log(data);  // Вывод данных для проверки

            var options = {
                title: 'Wins and Losses for the Week',
                hAxis: {title: 'Players'},
                vAxis: {title: 'Count'},
                seriesType: 'bars',
                series: {5: {type: 'line'}}
            };

            var chart = new google.visualization.ComboChart(document.getElementById('chart_div'));
            chart.draw(data, options);
        }
    </script>

    <section class="sliders">
        <div class="slider-container">
            <div class="slider" id="arena-slider">
                <h3>Arenas</h3>
                <!-- Arena Images -->
                <img src="{{ url_for('static', filename='images/default/arena1.png') }}" alt="Fantasy Arena">
                <img src="{{ url_for('static', filename='images/default/arena2.png') }}" alt="Futuristic Arena">
                <img src="{{ url_for('static', filename='images/default/arena3.png') }}" alt="Ancient Arena">
                <!-- Add more images as needed -->
            </div>

            <div class="slider" id="character-slider">
                <h3>Characters</h3>
                <!-- Character Images -->
                <img src="{{ url_for('static', filename='images/default/player1.png') }}" alt="Cyber Warrior">
                <img src="{{ url_for('static', filename='images/default/player2.png') }}" alt="Magic Mage">
                <!-- Add more images as needed -->
            </div>

            <div class="slider" id="video-slider">
                <h3>Battle Videos</h3>
                <!-- Battle Videos -->
                <video src="{{ url_for('static', filename='videos/default/battle1.mp4') }}" controls></video>
                <video src="{{ url_for('static', filename='videos/default/battle2.mp4') }}" controls></video>
            </div>
        </div>
    </section>

    <section class="gifs">
        <h3>Battle GIFs</h3>
        <div class="gif-container">
            <!-- Battle GIFs -->
            <img src="{{ url_for('static', filename='images/default/gif/battle1.gif') }}" alt="Battle GIF 1">
            <img src="{{ url_for('static', filename='images/default/gif/battle2.gif') }}" alt="Battle GIF 2">
        </div>
    </section>
</div>
{% endblock %}
