{% extends 'base.html' %}

{% block content %}
<h1>Интерфейс игрока</h1>

<h2>Ваши персонажи</h2>
<ul>
    {% for character in characters %}
        <li>
            <form method="post" action="{{ url_for('select_character', character_id=character.id) }}">
                <button type="submit">{{ character.name }}</button>
            </form>
            <form method="post" action="{{ url_for('delete_character', character_id=character.id) }}" style="display:inline;">
                <button type="submit">Удалить</button>
            </form>
        </li>
    {% endfor %}
</ul>

{% if selected_character %}
    <div class="character-section">
        <label for="character-image">Персонаж:</label>
        <div id="character-image">
            <img src="{{ url_for('static', filename=selected_character.image_url.replace('\\', '/')) }}" alt="Character Image">
        </div>
        <h2>{{ selected_character.name }}</h2>
    </div>
{% endif %}

<form method="post" action="{{ url_for('create_character') }}">
    <label for="name">Имя персонажа:</label>
    <input type="text" id="name" name="name" required>
    
    <label for="description">Описание персонажа:</label>
    <textarea id="description" name="description" required></textarea>
    
    <button type="submit">Создать персонажа</button>
    
    <p>Подсказка: Введите характеристики вашего персонажа, такие как рост, вес, оружие и т.д.</p>
</form>

<h2>Выбор режима игры</h2>
<div id="game-mode-buttons">
    <button type="button" class="mode-btn active" data-mode="automatic">Автоматический режим</button>
    <button type="button" class="mode-btn" data-mode="semi_automatic">Полуавтоматический режим</button>
    <button type="button" class="mode-btn" data-mode="manual">Ручной режим</button>
</div>

<h2>Голосовой ввод характеристик</h2>
<button id="voice-input-btn">Нажмите и говорите</button>
<textarea id="voice-input" name="voice-input" readonly></textarea>

<h2>Чат</h2>
<div id="chat-box">
    {% for message in messages %}
        <div class="chat-message {{ 'right' if message.user_id == 1 else 'left' }}">
            <p>{{ message.content }}</p>
            <span class="timestamp">{{ message.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</span>
        </div>
    {% endfor %}
</div>
<form id="chat-form" method="post" action="{{ url_for('send_message') }}">
    <input type="text" id="message" name="message" placeholder="Введите сообщение...">
    <button type="submit">Отправить</button>
</form>

<script src="{{ url_for('static', filename='js/voice_input.js') }}"></script>
<script src="{{ url_for('static', filename='js/game_mode.js') }}"></script>
{% endblock %}
