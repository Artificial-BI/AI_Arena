{% extends 'base.html' %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/player.css') }}"> 
  
{% endblock %}

{% block content %}
<h1>Интерфейс игрока</h1>

<h2>Ваши персонажи</h2>
<ul>
    {% for character in characters %}
        <li class="character-item">
            <form method="post" action="{{ url_for('main.select_character', character_id=character.id) }}">
                <button type="submit">{{ character.name }}</button>
            </form>
            <form method="post" action="{{ url_for('main.delete_character', character_id=character.id) }}" class="delete-form">
                <button type="submit">Удалить</button>
            </form>
        </li>
    {% endfor %}
</ul>

{% if selected_character %}
    <div class="character-section">
        <label for="character-image">Персонаж:</label>
        <div id="character-image">
            <img src="{{ url_for('static', filename=selected_character.image_url.replace('\\', '/')) }}" alt="Character Image">
        </div>
        <h2>{{ selected_character.name }}</h2>
        <p>{{ selected_character.description }}</p>
    </div>
{% endif %}

<div class="create-character-block">
    <h2>Создание персонажа</h2>
    <form method="post" action="{{ url_for('main.create_character') }}">
        <label for="name">Имя персонажа:</label>
        <input type="text" id="name" name="name" required>
        
        <label for="description">Описание персонажа:</label>
        <textarea id="description" name="description" required></textarea>
        
        <button type="submit">Создать персонажа</button>
        
        <p>Подсказка: Введите характеристики вашего персонажа, такие как рост, вес, оружие и т.д.</p>

        <h2>Голосовой ввод характеристик</h2>
        <button type="button" id="voice-input-btn">Нажмите и говорите</button>
    </form>
</div>

<h2>Выбор режима игры</h2>
<div id="game-mode-buttons">
    <button type="button" class="mode-btn active" data-mode="automatic">Автоматический режим</button>
    <button type="button" class="mode-btn" data-mode="semi_automatic">Полуавтоматический режим</button>
    <button type="button" class="mode-btn" data-mode="manual">Ручной режим</button>
</div>

<h2>Чат</h2>
<div id="chat-box">
    {% for message in messages %}
        <div class="chat-message {{ 'right' if message.user_id == 1 else 'left' }}">
            <p>{{ message.content }}</p>
            <span class="timestamp">{{ message.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</span>
        </div>
    {% endfor %}
</div>
<form id="chat-form" method="post" action="{{ url_for('main.send_message') }}">
    <input type="text" id="message" name="message" placeholder="Введите сообщение...">
    <button type="submit">Отправить</button>
</form>

<script src="{{ url_for('static', filename='js/voice_input.js') }}"></script>
<script src="{{ url_for('static', filename='js/game_mode.js') }}"></script>
{% endblock %}
ы